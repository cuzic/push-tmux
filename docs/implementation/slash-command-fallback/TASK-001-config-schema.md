# TASK-001: 設定スキーマの設計

## 設定項目の定義

### 新しい設定セクション: `slash_commands_settings`

```toml
[slash_commands_settings]
# 未定義のスラッシュコマンドを通常メッセージとして送信するかどうか
# デフォルト: true（claude-code などの外部ツールとの互換性を優先）
fallback_undefined = true

# オプション: カスタムコマンドのプレフィックス（将来の拡張用）
# custom_prefix = "pt-"  # 例: /pt-deploy のみカスタムコマンドとして扱う
```

## デフォルト値の決定理由

### `fallback_undefined = true` をデフォルトにする理由:

1. **ユーザビリティ優先**: 
   - `/login` のような一般的なコマンドが期待通り動作する
   - claude-code や他のツールとの互換性を保つ

2. **驚き最小の原則**: 
   - ユーザーが `/` で始まるメッセージを送信したら、それが処理されることを期待する
   - 定義されていないコマンドが無視されるのは直感的でない

3. **段階的な移行**: 
   - 既存ユーザーは必要に応じて `false` に設定可能
   - 新規ユーザーはすぐに使い始められる

## 後方互換性の保証

### 既存の動作を維持する方法:

```toml
[slash_commands_settings]
# 従来の動作（未定義コマンドを無視）を維持したい場合
fallback_undefined = false
```

### 移行パス:

1. **設定ファイルがない場合**: デフォルトで `fallback_undefined = true`
2. **既存の設定ファイル**: セクションがなければデフォルト値を使用
3. **明示的な設定**: ユーザーが指定した値を優先

## 実装への影響

### 変更が必要なファイル:

1. `push_tmux/config.py`: 設定の読み込みとデフォルト値
2. `push_tmux/slash_commands.py`: フォールバック判定ロジック
3. `push_tmux/commands/listen.py`: メッセージ処理フロー

### 設定の優先順位:

1. 環境変数（将来の拡張用）
2. 設定ファイル（config.toml）
3. デフォルト値

## 完了条件

- [x] 設定スキーマが明確に定義されている
- [x] 後方互換性が保証されている
- [x] デフォルト値が適切に選択されている
- [x] 移行パスが明確である